<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ config.APP_TITLE }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ“‹ {{ config.APP_TITLE }}</h1>
      <div class="summary">
        {{ owner }}/{{ name }} ì €ì¥ì†Œì˜ PR ëª©ë¡
        {% if prs %}
          <span class="comment-count">{{ prs|length }} PR</span>
        {% endif %}
        {% if pr_type == 'reviewed' %}
          <span class="pr-type-badge">ë¦¬ë·°í•œ PR</span>
        {% else %}
          <span class="pr-type-badge">ì‘ì„±í•œ PR</span>
        {% endif %}
      </div>
    </header>

    <div class="filters">
      <form method="get" action="/">
        <div class="filter-group">
          <label for="type">PR íƒ€ì…:</label>
          <select name="type" id="type">
            <option value="authored" {% if pr_type == 'authored' %}selected{% endif %}>ë‚´ê°€ ì‘ì„±í•œ PR</option>
            <option value="reviewed" {% if pr_type == 'reviewed' %}selected{% endif %}>ë‚´ê°€ ë¦¬ë·°í•œ PR</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="state">PR ìƒíƒœ:</label>
          <select name="state" id="state">
            <option value="all" {% if state == 'all' %}selected{% endif %}>ì „ì²´</option>
            <option value="open" {% if state == 'open' %}selected{% endif %}>ì—´ë¦¼</option>
            <option value="closed" {% if state == 'closed' %}selected{% endif %}>ë‹«í˜</option>
            <option value="merged" {% if state == 'merged' %}selected{% endif %}>ë³‘í•©ë¨</option>
          </select>
        </div>

        <button type="submit" class="filter-button">í•„í„° ì ìš©</button>
      </form>
    </div>

    <main>
      {% if prs %}
        {% for pr in prs %}
          <a href="/pr/{{ pr.number }}" class="pr-link">
            <div class="pr" data-pr-number="{{ pr.number }}">
              <div class="pr-header">
                <div class="pr-title">
                  <span class="pr-number">#{{ pr.number }}</span>
                  <span class="pr-title-text">{{ pr.title }}</span>
                  <span class="pr-state pr-state-{{ pr.state|lower }}">{{ pr.state }}</span>
                  <a href="{{ pr.url }}" target="_blank" rel="noopener noreferrer" 
                     class="github-link" onclick="event.stopPropagation()">
                    ğŸ”—
                  </a>
                </div>
                <div class="pr-date">{{ pr.createdAt[:10] }}</div>
              </div>
            </div>
          </a>
        {% endfor %}
      {% else %}
        <div class="no-comments">
          <div class="no-comments-icon">âœ…</div>
          <p>
            {% if pr_type == 'reviewed' %}
              ë‚´ê°€ ë¦¬ë·° ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê¸´ {{ state }} ìƒíƒœì˜ PRì´ ì—†ìŠµë‹ˆë‹¤.
            {% else %}
              ë‚´ê°€ ì‘ì„±í•œ {{ state }} ìƒíƒœì˜ PRì´ ì—†ìŠµë‹ˆë‹¤.
            {% endif %}
          </p>
          <p class="hint">í•„í„°ë¥¼ ë³€ê²½í•´ë³´ì„¸ìš”.</p>
        </div>
      {% endif %}
    </main>

    <footer>
      <p>Powered by GitHub CLI & GraphQL API</p>
    </footer>
  </div>
</body>
</html>
